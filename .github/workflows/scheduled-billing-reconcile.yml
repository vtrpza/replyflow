name: Scheduled Billing Reconciliation

on:
  schedule:
    # Every 12 hours
    - cron: "0 */12 * * *"
  workflow_dispatch:

jobs:
  reconcile:
    name: Trigger billing reconciliation
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run billing reconciliation
        run: bash scripts/scheduled-billing-reconcile.sh
        env:
          BILLING_RECONCILE_TOKEN: ${{ secrets.BILLING_RECONCILE_TOKEN }}
